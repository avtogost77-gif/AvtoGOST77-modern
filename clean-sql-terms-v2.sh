#!/bin/bash

# Список файлов для обработки (исключая бэкапы и .md файлы)
FILES=$(find . -name "*.html" -type f ! -path "./backup*/*")

# Функция для замены текста с сохранением отступов
replace_text() {
    local file=$1
    
    # Страховки и компенсации
    sed -i 's/страхов[а-я]* груз[а-я]*/бережная доставка/g' "$file"
    sed -i 's/страхов[а-я]* покрыти[а-я]*/надежная перевозка/g' "$file"
    sed -i 's/страхов[а-я]* компани[а-я]*/мы/g' "$file"
    sed -i 's/страхов[а-я]* случа[а-я]*/проблемная ситуация/g' "$file"
    sed -i 's/все перевозки застрахованы/мы отвечаем за сохранность груза/g' "$file"
    sed -i 's/компенсаци[а-я]*/оперативное решение/g' "$file"
    
    # Документооборот и документы
    sed -i 's/электронн[а-я]* документооборот[а-я]*/помощь в оформлении документов/g' "$file"
    sed -i 's/закрывающ[а-я]* документ[а-я]*/транспортная накладная/g' "$file"
    sed -i 's/полный пакет документов/помощь в оформлении ТрН/g' "$file"
    
    # Отслеживание и охрана
    sed -i 's/систем[а-я]* отслеживани[а-я]*/оперативная связь с водителем/g' "$file"
    sed -i 's/GPS-мониторинг[а-я]* для отслеживани[а-я]*/оперативная связь с водителем/g' "$file"
    sed -i 's/охран[а-я]* груз[а-я]*/бережная доставка/g' "$file"
    sed -i 's/пломб[а-я]*/надежная перевозка/g' "$file"
    
    # НДС
    sed -i 's/с НДС/фиксированная цена/g' "$file"
    sed -i 's/без НДС/фиксированная цена/g' "$file"
    
    # Специфичные фразы
    sed -i 's/собственный автопарк/проверенные партнеры-перевозчики/g' "$file"
    sed -i 's/собственный транспорт/проверенные партнеры/g' "$file"
    sed -i 's/свой транспорт/надежные перевозчики/g' "$file"
    sed -i 's/в сохранности/бережно/g' "$file"
    sed -i 's/сохранность груза/бережная доставка/g' "$file"
    sed -i 's/материальную ответственность/ответственность/g' "$file"
}

# Обработка каждого файла
for file in $FILES; do
    echo "Обработка файла: $file"
    replace_text "$file"
done

echo "Готово! Проверьте изменения в git diff"
