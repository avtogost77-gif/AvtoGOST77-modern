/**
 * Тактильные кнопки 2030
 * Кайф от каждого касания
 */

// Базовый класс тактильной кнопки
.tactile-button {
  // Основа
  display: inline-flex;
  align-items: center;
  justify-content: center;
  gap: var(--space-2);
  
  // Размеры
  padding: var(--space-3) var(--space-6);
  min-height: 48px; // Доступность: минимум 44px для касания
  
  // Типографика
  font-family: inherit;
  font-size: var(--font-base);
  font-weight: var(--font-semibold);
  line-height: var(--leading-tight);
  text-decoration: none;
  white-space: nowrap;
  
  // Внешний вид
  border: 1px solid transparent;
  border-radius: var(--radius-tactile-md);
  background: transparent;
  cursor: pointer;
  position: relative;
  overflow: hidden;
  
  // Переходы
  transition: all var(--duration-normal) var(--spring);
  
  // Отключаем выделение текста
  user-select: none;
  -webkit-tap-highlight-color: transparent;
  
  // Фокус для доступности
  &:focus {
    outline: 2px solid var(--primary);
    outline-offset: 2px;
  }
  
  &:focus:not(:focus-visible) {
    outline: none;
  }
  
  // Состояние disabled
  &:disabled,
  &[aria-disabled="true"] {
    pointer-events: none;
    opacity: 0.5;
    cursor: not-allowed;
  }
  
  // Рипл эффект
  .button-ripple {
    position: absolute;
    top: 50%;
    left: 50%;
    width: 0;
    height: 0;
    background: rgba(255, 255, 255, 0.3);
    border-radius: 50%;
    transform: translate(-50%, -50%);
    transition: width 0.6s ease, height 0.6s ease;
    pointer-events: none;
  }
  
  &:active .button-ripple {
    width: 300px;
    height: 300px;
  }
}

// ===== ВАРИАНТЫ КНОПОК =====

// Основная кнопка
.primary-button {
  background: linear-gradient(135deg, var(--primary) 0%, var(--primary-dark) 100%);
  color: var(--text-inverse);
  border-color: var(--primary);
  box-shadow: var(--haptic-light);
  
  &::before {
    content: '';
    position: absolute;
    top: 0; left: 0; right: 0; bottom: 0;
    background: linear-gradient(135deg, rgba(255, 255, 255, 0.1) 0%, transparent 100%);
    border-radius: inherit;
    opacity: 0;
    transition: opacity var(--duration-normal) ease;
  }
  
  &:hover {
    transform: translateY(-2px) scale(1.02);
    box-shadow: var(--haptic-medium), var(--haptic-glow);
    
    &::before {
      opacity: 1;
    }
  }
  
  &:active {
    transform: translateY(-1px) scale(1.01);
    transition: all var(--duration-instant) ease;
  }
}

// Кнопка успеха
.success-button {
  background: linear-gradient(135deg, var(--success) 0%, var(--success-dark) 100%);
  color: var(--text-inverse);
  border-color: var(--success);
  box-shadow: var(--haptic-light);
  
  &:hover {
    transform: translateY(-2px) scale(1.02);
    box-shadow: var(--haptic-medium), 0 0 32px rgba(16, 185, 129, 0.3);
  }
  
  &:active {
    transform: translateY(-1px) scale(1.01);
    transition: all var(--duration-instant) ease;
  }
}

// Кнопка опасности
.danger-button {
  background: linear-gradient(135deg, var(--danger) 0%, var(--danger-dark) 100%);
  color: var(--text-inverse);
  border-color: var(--danger);
  box-shadow: var(--haptic-light);
  
  &:hover {
    transform: translateY(-2px) scale(1.02);
    box-shadow: var(--haptic-medium), 0 0 32px rgba(239, 68, 68, 0.3);
  }
}

// Информационная кнопка
.info-button {
  background: linear-gradient(135deg, var(--info) 0%, var(--info-dark) 100%);
  color: var(--text-inverse);
  border-color: var(--info);
  box-shadow: var(--haptic-light);
  
  &:hover {
    transform: translateY(-2px) scale(1.02);
    box-shadow: var(--haptic-medium), 0 0 32px rgba(6, 182, 212, 0.3);
  }
}

// Вторичная кнопка
.secondary-button {
  background: var(--bg-primary);
  color: var(--text-secondary);
  border-color: var(--gray-300);
  box-shadow: var(--haptic-light);
  
  &:hover {
    background: var(--gray-50);
    transform: translateY(-2px) scale(1.02);
    box-shadow: var(--haptic-medium);
    border-color: var(--gray-400);
  }
}

// Контурная кнопка
.outline-button {
  background: transparent;
  color: var(--primary);
  border-color: var(--primary);
  
  &:hover {
    background: var(--primary);
    color: var(--text-inverse);
    transform: translateY(-2px) scale(1.02);
    box-shadow: var(--haptic-medium);
  }
}

// Прозрачная кнопка
.ghost-button {
  background: transparent;
  color: var(--text-primary);
  border-color: transparent;
  
  &:hover {
    background: var(--gray-100);
    transform: translateY(-1px);
    box-shadow: var(--haptic-light);
  }
}

// ===== РАЗМЕРЫ КНОПОК =====

.button-sm {
  padding: var(--space-2) var(--space-4);
  font-size: var(--font-sm);
  min-height: 36px;
  border-radius: var(--radius-tactile-sm);
}

.button-lg {
  padding: var(--space-4) var(--space-8);
  font-size: var(--font-lg);
  min-height: 56px;
  border-radius: var(--radius-tactile-lg);
}

.button-xl {
  padding: var(--space-5) var(--space-10);
  font-size: var(--font-xl);
  min-height: 64px;
  border-radius: var(--radius-tactile-xl);
}

// ===== СПЕЦИАЛЬНЫЕ КНОПКИ =====

// Кнопка с градиентом
.gradient-button {
  background: linear-gradient(135deg, var(--primary) 0%, var(--accent) 50%, var(--success) 100%);
  background-size: 200% 200%;
  color: var(--text-inverse);
  border: none;
  box-shadow: var(--haptic-medium);
  animation: gradientShift 3s ease infinite;
  
  &:hover {
    transform: translateY(-3px) scale(1.03);
    box-shadow: var(--haptic-strong);
    animation-duration: 1s;
  }
}

@keyframes gradientShift {
  0%, 100% { background-position: 0% 50%; }
  50% { background-position: 100% 50%; }
}

// Glassmorphism кнопка
.glass-button {
  background: var(--glass-bg);
  backdrop-filter: var(--backdrop-blur-md);
  border: 1px solid var(--glass-border);
  color: var(--text-primary);
  box-shadow: var(--glass-shadow-light);
  
  &:hover {
    background: var(--glass-bg-light);
    transform: translateY(-2px) scale(1.02);
    box-shadow: var(--glass-shadow);
  }
}

// Неоморфизм кнопка
.neomorph-button {
  background: var(--neomorph-light);
  color: var(--text-primary);
  border: none;
  box-shadow: var(--neomorph-shadow-light);
  
  &:hover {
    transform: translateY(-1px);
  }
  
  &:active {
    box-shadow: var(--neomorph-shadow-inset);
    transform: translateY(1px);
  }
}

// Floating Action Button
.fab {
  width: 56px;
  height: 56px;
  border-radius: 50%;
  padding: 0;
  background: var(--primary);
  color: var(--text-inverse);
  box-shadow: var(--haptic-medium);
  position: fixed;
  bottom: var(--space-6);
  right: var(--space-6);
  z-index: var(--z-fixed);
  
  &:hover {
    transform: scale(1.1);
    box-shadow: var(--haptic-strong);
  }
  
  &:active {
    transform: scale(1.05);
  }
}

// ===== ИКОНКИ В КНОПКАХ =====

.button-icon {
  font-size: 1.2em;
  
  &:only-child {
    margin: 0;
  }
}

// Кнопка только с иконкой
.icon-button {
  padding: var(--space-3);
  aspect-ratio: 1;
  
  .button-icon {
    font-size: 1.25em;
  }
}

// ===== ГРУППЫ КНОПОК =====

.button-group {
  display: inline-flex;
  
  .tactile-button {
    border-radius: 0;
    
    &:first-child {
      border-top-left-radius: var(--radius-tactile-md);
      border-bottom-left-radius: var(--radius-tactile-md);
    }
    
    &:last-child {
      border-top-right-radius: var(--radius-tactile-md);
      border-bottom-right-radius: var(--radius-tactile-md);
    }
    
    &:not(:last-child) {
      border-right-width: 0;
    }
  }
}

// ===== АДАПТИВНОСТЬ =====

@media (max-width: 768px) {
  .tactile-button {
    min-height: 44px; // iOS рекомендация
    font-size: var(--font-sm);
  }
  
  .button-lg {
    min-height: 52px;
  }
  
  .button-xl {
    min-height: 60px;
  }
  
  // Увеличиваем зоны касания на мобильных
  .icon-button {
    min-width: 44px;
    min-height: 44px;
  }
}

// ===== ТЕМНАЯ ТЕМА =====

@media (prefers-color-scheme: dark) {
  .secondary-button {
    background: var(--gray-800);
    color: var(--gray-200);
    border-color: var(--gray-600);
    
    &:hover {
      background: var(--gray-700);
      border-color: var(--gray-500);
    }
  }
  
  .ghost-button {
    color: var(--gray-200);
    
    &:hover {
      background: var(--gray-800);
    }
  }
  
  .glass-button {
    background: var(--glass-bg-dark);
    color: var(--gray-200);
    border-color: var(--glass-border-dark);
  }
}

// ===== АНИМАЦИИ ЗАГРУЗКИ =====

.button-loading {
  pointer-events: none;
  
  .button-text {
    opacity: 0.7;
  }
  
  &::after {
    content: '';
    position: absolute;
    width: 16px;
    height: 16px;
    margin: auto;
    border: 2px solid transparent;
    border-top-color: currentColor;
    border-radius: 50%;
    animation: spin 1s linear infinite;
  }
}

@keyframes spin {
  0% { transform: rotate(0deg); }
  100% { transform: rotate(360deg); }
}

// ===== ACCESSIBILITY =====

// Увеличенная зона клика для людей с ограниченной моторикой
.tactile-button {
  &::before {
    content: '';
    position: absolute;
    top: -4px;
    left: -4px;
    right: -4px;
    bottom: -4px;
    z-index: -1;
  }
}

// Высокий контраст
@media (prefers-contrast: high) {
  .tactile-button {
    border-width: 2px;
  }
  
  .outline-button {
    border-width: 3px;
  }
}

// Уменьшенная анимация
@media (prefers-reduced-motion: reduce) {
  .tactile-button {
    transition: none;
    
    &:hover {
      transform: none;
    }
  }
  
  .gradient-button {
    animation: none;
  }
}