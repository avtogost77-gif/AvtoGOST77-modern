#!/bin/bash

# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ git hooks –¥–ª—è Cursor Sync

echo "üì¶ –£—Å—Ç–∞–Ω–æ–≤–∫–∞ git hooks –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏..."

# –ü—Ä–æ–≤–µ—Ä—è–µ–º, —á—Ç–æ –º—ã –≤ git —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏
if [ ! -d ".git" ]; then
    echo "‚ùå –û—à–∏–±–∫–∞: –ù–µ –Ω–∞–π–¥–µ–Ω git —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π!"
    echo "   –ó–∞–ø—É—Å—Ç–∏—Ç–µ —ç—Ç–æ—Ç —Å–∫—Ä–∏–ø—Ç –∏–∑ –∫–æ—Ä–Ω—è –≤–∞—à–µ–≥–æ –ø—Ä–æ–µ–∫—Ç–∞"
    exit 1
fi

# –°–æ–∑–¥–∞–µ–º —Å–∏–º–≤–æ–ª–∏—á–µ—Å–∫—É—é —Å—Å—ã–ª–∫—É –Ω–∞ pre-commit hook
if [ -f ".git/hooks/pre-commit" ]; then
    echo "‚ö†Ô∏è  pre-commit hook —É–∂–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç. –°–æ–∑–¥–∞—é —Ä–µ–∑–µ—Ä–≤–Ω—É—é –∫–æ–ø–∏—é..."
    mv .git/hooks/pre-commit .git/hooks/pre-commit.backup
fi

ln -s ../../.cursor/git-hooks/pre-commit .git/hooks/pre-commit

echo "‚úÖ Git hooks —É—Å–ø–µ—à–Ω–æ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã!"
echo ""
echo "–¢–µ–ø–µ—Ä—å –ø–µ—Ä–µ–¥ –∫–∞–∂–¥—ã–º –∫–æ–º–º–∏—Ç–æ–º –±—É–¥–µ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞–ø—É—Å–∫–∞—Ç—å—Å—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è."
echo "–ß—Ç–æ–±—ã –æ—Ç–∫–ª—é—á–∏—Ç—å, —É–¥–∞–ª–∏—Ç–µ —Ñ–∞–π–ª .git/hooks/pre-commit"