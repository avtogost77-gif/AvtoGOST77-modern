#!/bin/bash

# Pre-commit hook –¥–ª—è Cursor Sync
# –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä—É–µ—Ç –∏–∑–º–µ–Ω–µ–Ω–∏—è –ø–µ—Ä–µ–¥ –∫–æ–º–º–∏—Ç–æ–º

CURSOR_DIR="$HOME/.cursor"
SYNC_SCRIPT="$(git rev-parse --show-toplevel)/.cursor/sync-manager.sh"

# –ü—Ä–æ–≤–µ—Ä—è–µ–º, —Å—É—â–µ—Å—Ç–≤—É–µ—Ç –ª–∏ —Å–∫—Ä–∏–ø—Ç —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏
if [ -f "$SYNC_SCRIPT" ]; then
    echo "üîÑ –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π –ø–µ—Ä–µ–¥ –∫–æ–º–º–∏—Ç–æ–º..."
    
    # –ó–∞–ø—É—Å–∫–∞–µ–º —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—é
    "$SYNC_SCRIPT" sync
    
    # –ü—Ä–æ–≤–µ—Ä—è–µ–º —Å—Ç–∞—Ç—É—Å
    if [ $? -ne 0 ]; then
        echo "‚ùå –û—à–∏–±–∫–∞ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏! –ö–æ–º–º–∏—Ç –æ—Ç–º–µ–Ω–µ–Ω."
        echo "   –ó–∞–ø—É—Å—Ç–∏—Ç–µ '.cursor/sync-manager.sh status' –¥–ª—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏"
        exit 1
    fi
    
    echo "‚úÖ –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –∑–∞–≤–µ—Ä—à–µ–Ω–∞ —É—Å–ø–µ—à–Ω–æ"
fi

# –ü—Ä–æ–¥–æ–ª–∂–∞–µ–º —Å –∫–æ–º–º–∏—Ç–æ–º
exit 0