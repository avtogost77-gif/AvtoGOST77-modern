#!/bin/bash

echo "üé® –§–ò–ù–ê–õ–¨–ù–´–ô –î–ï–ü–õ–û–ô –í–ò–ó–£–ê–õ–¨–ù–û–ô –í–ï–†–°–ò–ò!"
echo "======================================"
echo "‚ú® –ó–∞–≥—Ä—É–∂–∞–µ–º —Å—Ç—Ä–∞–Ω–∏—Ü—É —Å –∫—Ä—É—Ç—ã–º–∏ –∫–µ–π—Å–∞–º–∏ –∏ —Ä–µ–∫–≤–∏–∑–∏—Ç–∞–º–∏ –≤ —Ñ—É—Ç–µ—Ä–µ"

VPS_HOST="root@193.160.208.183"
VPS_PATH="/www/wwwroot/avtogost77.ru"
SSH_KEY="$HOME/.ssh/id_ed25519"

if [ ! -f "$SSH_KEY" ]; then
    echo "‚ùå –û—à–∏–±–∫–∞: SSH –∫–ª—é—á –Ω–µ –Ω–∞–π–¥–µ–Ω: $SSH_KEY"
    exit 1
fi
echo "‚úÖ SSH –∫–ª—é—á –Ω–∞–π–¥–µ–Ω: $SSH_KEY"

# –°–æ–∑–¥–∞–µ–º —Ä–µ–∑–µ—Ä–≤–Ω—É—é –∫–æ–ø–∏—é
echo "üì¶ –°–æ–∑–¥–∞–Ω–∏–µ —Ä–µ–∑–µ—Ä–≤–Ω–æ–π –∫–æ–ø–∏–∏..."
ssh -i $SSH_KEY $VPS_HOST "cd $VPS_PATH && cp index.html index.html.backup-visual-$(date +%Y%m%d-%H%M%S) 2>/dev/null || true"

# –ó–∞–≥—Ä—É–∂–∞–µ–º –æ–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã
echo "üé® –ó–∞–≥—Ä—É–∂–∞–µ–º –í–ò–ó–£–ê–õ–¨–ù–£–Æ –í–ï–†–°–ò–Æ —Å –Ω–æ–≤—ã–º–∏ –∫–µ–π—Å–∞–º–∏..."
scp -i $SSH_KEY index.html $VPS_HOST:$VPS_PATH/
scp -i $SSH_KEY assets/css/unified-site-styles.css $VPS_HOST:$VPS_PATH/assets/css/

# –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞
echo "üîí –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞..."
ssh -i $SSH_KEY $VPS_HOST "chmod 644 $VPS_PATH/index.html $VPS_PATH/assets/css/unified-site-styles.css"
ssh -i $SSH_KEY $VPS_HOST "chown www-data:www-data $VPS_PATH/index.html $VPS_PATH/assets/css/unified-site-styles.css"

# –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞–µ–º Nginx –¥–ª—è –æ—á–∏—Å—Ç–∫–∏ –∫–µ—à–∞
echo "üîÑ –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞–µ–º Nginx..."
ssh -i $SSH_KEY $VPS_HOST "systemctl reload nginx"

echo ""
echo "üéâ –í–ò–ó–£–ê–õ–¨–ù–ê–Ø –í–ï–†–°–ò–Ø –£–°–ü–ï–®–ù–û –†–ê–ó–í–ï–†–ù–£–¢–ê!"
echo ""
echo "üéØ –ß–¢–û –û–ë–ù–û–í–õ–ï–ù–û:"
echo "   üé® –ö–µ–π—Å—ã –ø–µ—Ä–µ–¥–µ–ª–∞–Ω—ã –≤ –∫—Ä–∞—Å–∏–≤—ã–µ –∫–∞—Ä—Ç–æ—á–∫–∏ —Å:"
echo "      ‚Ä¢ –ì—Ä–∞–¥ient–Ω—ã–º–∏ –∑–∞–≥–æ–ª–æ–≤–∫–∞–º–∏"
echo "      ‚Ä¢ –ú–µ—Ç—Ä–∏–∫–∞–º–∏ –∏ —Ü–∏—Ñ—Ä–∞–º–∏"
echo "      ‚Ä¢ Timeline —Å –∏–∫–æ–Ω–∫–∞–º–∏"
echo "      ‚Ä¢ –†–µ–∑—É–ª—å—Ç–∞—Ç–∞–º–∏ —Å –ø–æ–¥—Å–≤–µ—Ç–∫–æ–π"
echo ""
echo "   üìã –†–µ–∫–≤–∏–∑–∏—Ç—ã –ø–µ—Ä–µ–Ω–µ—Å–µ–Ω—ã –≤ —Ñ—É—Ç–µ—Ä:"
echo "      ‚Ä¢ –ü—Ä–æ—Å—Ç—ã–º —Ç–µ–∫—Å—Ç–æ–º –±–µ–∑ —Å–ø–æ–π–ª–µ—Ä–∞"
echo "      ‚Ä¢ –ö–æ–º–ø–∞–∫—Ç–Ω–æ –∏ —É–¥–æ–±–Ω–æ"
echo "      ‚Ä¢ –í—Å–µ –¥–∞–Ω–Ω—ã–µ –Ω–∞ –≤–∏–¥—É"
echo ""
echo "üìè –§–ò–ù–ê–õ–¨–ù–´–ô –†–ê–ó–ú–ï–†: 1800 —Å—Ç—Ä–æ–∫ (–∫–æ–º–ø–∞–∫—Ç–Ω–æ!)"
echo "üöÄ –†–ï–ó–£–õ–¨–¢–ê–¢: –°–æ–≤—Ä–µ–º–µ–Ω–Ω–∞—è, –≤–∏–∑—É–∞–ª—å–Ω–∞—è, –∫–æ–Ω–≤–µ—Ä—Å–∏–æ–Ω–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞!"
echo ""
echo "üîó –ü—Ä–æ–≤–µ—Ä—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç: https://avtogost77.ru"
echo "üì± –û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä—É–π –Ω–∞ –º–æ–±–∏–ª—å–Ω–æ–º!"


