// ============================================
// ОСНОВНЫЕ МИКСИНЫ - AvtoGOST77
// ============================================
// Дата создания: 31 августа 2025
// Автор: AI Assistant
// Описание: Основные миксины для компонентов

// ============================================
// ИМПОРТЫ
// ============================================
@import '../_settings/colors';
@import '../_settings/spacing';
@import '../_settings/breakpoints';

// ============================================
// МИКСИНЫ ДЛЯ FLEXBOX
// ============================================

// Flexbox центр
@mixin flex-center {
  display: flex;
  align-items: center;
  justify-content: center;
}

// Flexbox центр по вертикали
@mixin flex-center-y {
  display: flex;
  align-items: center;
}

// Flexbox центр по горизонтали
@mixin flex-center-x {
  display: flex;
  justify-content: center;
}

// Flexbox между элементами
@mixin flex-between {
  display: flex;
  align-items: center;
  justify-content: space-between;
}

// Flexbox вокруг элементов
@mixin flex-around {
  display: flex;
  align-items: center;
  justify-content: space-around;
}

// Flexbox колонка
@mixin flex-column {
  display: flex;
  flex-direction: column;
}

// Flexbox колонка с центрированием
@mixin flex-column-center {
  @include flex-column;
  align-items: center;
  justify-content: center;
}

// ============================================
// МИКСИНЫ ДЛЯ GRID
// ============================================

// CSS Grid центр
@mixin grid-center {
  display: grid;
  place-items: center;
}

// CSS Grid колонки
@mixin grid-columns($columns: 1, $gap: var(--spacing-md)) {
  display: grid;
  grid-template-columns: repeat($columns, 1fr);
  gap: $gap;
}

// CSS Grid адаптивные колонки
@mixin grid-responsive($min-width: 300px, $gap: var(--spacing-md)) {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax($min-width, 1fr));
  gap: $gap;
}

// CSS Grid masonry
@mixin grid-masonry($columns: 3, $gap: var(--spacing-md)) {
  display: grid;
  grid-template-columns: repeat($columns, 1fr);
  grid-auto-rows: 0;
  grid-auto-flow: dense;
  gap: $gap;
}

// ============================================
// МИКСИНЫ ДЛЯ АНИМАЦИЙ
// ============================================

// Плавный переход
@mixin transition($properties: all, $duration: 0.3s, $timing: ease) {
  transition: $properties $duration $timing;
}

// Hover эффект
@mixin hover-lift($lift: 4px, $shadow: 0 8px 25px rgba(0, 0, 0, 0.15)) {
  @include transition(transform, box-shadow);
  
  &:hover {
    transform: translateY(-$lift);
    box-shadow: $shadow;
  }
}

// Пульсация
@mixin pulse($scale: 1.05, $duration: 2s) {
  animation: pulse $duration infinite;
  
  @keyframes pulse {
    0%, 100% { transform: scale(1); }
    50% { transform: scale($scale); }
  }
}

// Появление снизу
@mixin fade-in-up($distance: 30px, $duration: 0.6s) {
  opacity: 0;
  transform: translateY($distance);
  animation: fadeInUp $duration ease forwards;
  
  @keyframes fadeInUp {
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }
}

// ============================================
// МИКСИНЫ ДЛЯ КОМПОНЕНТОВ
// ============================================

// Кнопка
@mixin button($bg-color: #2D67F8, $text-color: #ffffff, $padding: 0.5rem 1rem) {
  display: inline-block;
  padding: $padding;
  background-color: $bg-color;
  color: $text-color;
  border: none;
  border-radius: 8px;
  text-decoration: none;
  text-align: center;
  cursor: pointer;
  @include transition(all, 0.3s, ease);
  
  &:hover {
    background-color: darken($bg-color, 10%);
    transform: translateY(-2px);
  }
  
  &:active {
    transform: translateY(0);
  }
}

// Карточка
@mixin card($padding: var(--spacing-md), $border-radius: 12px, $shadow: 0 4px 6px rgba(0, 0, 0, 0.1)) {
  padding: $padding;
  border-radius: $border-radius;
  box-shadow: $shadow;
  background-color: var(--color-white);
  @include transition(box-shadow, 0.3s, ease);
  
  &:hover {
    box-shadow: 0 8px 25px rgba(0, 0, 0, 0.15);
  }
}

// Форма
@mixin form-field($border-color: var(--color-border-medium), $focus-color: var(--color-primary)) {
  width: 100%;
  padding: var(--spacing-sm);
  border: 2px solid $border-color;
  border-radius: 8px;
  font-size: 1rem;
  @include transition(border-color 0.2s ease, box-shadow 0.2s ease);
  
  &:focus {
    outline: none;
    border-color: $focus-color;
    box-shadow: 0 0 0 3px rgba($focus-color, 0.1);
  }
  
  &:focus-visible {
    outline: 3px solid $focus-color;
    outline-offset: 2px;
  }
}

// ============================================
// МИКСИНЫ ДЛЯ КАЛЬКУЛЯТОРА (КРИТИЧНО!)
// ==========================================

// Шаг калькулятора
@mixin calculator-step($state: 'default') {
  padding: var(--spacing-md);
  border-radius: 8px;
  @include transition(all, 0.3s, ease);
  
  @if $state == 'active' {
    background: var(--color-primary);
    color: var(--color-white);
    transform: scale(1.05);
    box-shadow: 0 8px 25px rgba(45, 103, 248, 0.3);
  }
  
  @if $state == 'completed' {
    background: var(--color-success);
    color: var(--color-white);
    box-shadow: 0 4px 15px rgba(40, 167, 69, 0.3);
  }
  
  @if $state == 'error' {
    background: var(--color-error);
    color: var(--color-white);
    animation: shake 0.5s ease-in-out;
  }
}

// Прогресс бар калькулятора
@mixin calculator-progress($width: 0%) {
  width: $width;
  height: 4px;
  background: var(--gradient-primary);
  border-radius: 2px;
  @include transition(width, 0.3s, ease);
}

// ============================================
// МИКСИНЫ ДЛЯ HERO СЕКЦИЙ
// ============================================

// Hero секция
@mixin hero-section($bg-image: none, $min-height: 65vh) {
  position: relative;
  min-height: $min-height;
  background-image: $bg-image;
  background-position: center;
  background-size: cover;
  background-repeat: no-repeat;
  @include flex-column-center;
  text-align: center;
  color: var(--color-white);
  overflow: hidden;
  
  &::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: rgba(0, 0, 0, 0.4);
    z-index: 1;
  }
  
  > * {
    position: relative;
    z-index: 2;
  }
}

// ============================================
// МИКСИНЫ ДЛЯ АДАПТИВНОСТИ
// ============================================

// Touch-friendly элементы
@mixin touch-friendly($min-size: 44px) {
  min-height: $min-size;
  min-width: $min-size;
  touch-action: manipulation;
}

// Скрытие скроллбара
@mixin hide-scrollbar {
  -ms-overflow-style: none;
  scrollbar-width: none;
  
  &::-webkit-scrollbar {
    display: none;
  }
}

// ============================================
// МИКСИНЫ ДЛЯ ДОСТУПНОСТИ
// ============================================

// Focus state
@mixin focus-visible($color: var(--color-primary), $offset: 2px) {
  &:focus-visible {
    outline: 3px solid $color;
    outline-offset: $offset;
    transform: scale(1.05);
  }
}

// High contrast режим
@mixin high-contrast {
  @media (prefers-contrast: high) {
    border: 2px solid var(--color-black);
    background: var(--color-white);
    color: var(--color-black);
  }
}

// Reduced motion
@mixin reduced-motion {
  @media (prefers-reduced-motion: reduce) {
    transition: none;
    animation: none;
  }
}

// ============================================
// МИКСИНЫ ДЛЯ ПРОИЗВОДИТЕЛЬНОСТИ
// ============================================

// Will-change оптимизация
@mixin will-change($properties: transform) {
  will-change: $properties;
  contain: layout style paint;
}

// Hardware acceleration
@mixin hardware-acceleration {
  transform: translateZ(0);
  backface-visibility: hidden;
  perspective: 1000px;
}

// ============================================
// УТИЛИТАРНЫЕ МИКСИНЫ
// ============================================

// Clearfix
@mixin clearfix {
  &::after {
    content: '';
    display: table;
    clear: both;
  }
}

// Truncate текст
@mixin truncate($lines: 1) {
  @if $lines == 1 {
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
  } @else {
    display: -webkit-box;
    -webkit-line-clamp: $lines;
    -webkit-box-orient: vertical;
    overflow: hidden;
  }
}

// Абсолютное позиционирование
@mixin absolute-center {
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
}

// Фиксированное позиционирование
@mixin fixed-center {
  position: fixed;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
}
