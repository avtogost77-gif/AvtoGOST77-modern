#!/bin/bash

echo "ðŸš€ Ð­ÐšÐ¡Ð¢Ð Ð•ÐÐÐ«Ð™ Ð”Ð•ÐŸÐ›ÐžÐ™ Ð¡ Ð¤Ð˜ÐšÐ¡ÐÐœÐ˜ ÐœÐžÐ‘Ð˜Ð›Ð¬ÐÐ«Ð¥ ÐšÐÐžÐŸÐžÐš"
echo "=============================================="
echo ""

# Ð¦Ð²ÐµÑ‚Ð° Ð´Ð»Ñ Ð²Ñ‹Ð²Ð¾Ð´Ð°
GREEN='\033[0;32m'
RED='\033[0;31m'
YELLOW='\033[1;33m'
NC='\033[0m'

echo -e "${YELLOW}ðŸ“± Ð˜Ð¡ÐŸÐ ÐÐ’Ð›Ð•ÐÐ˜Ð¯ Ð’ Ð­Ð¢ÐžÐ™ Ð’Ð•Ð Ð¡Ð˜Ð˜:${NC}"
echo "âœ… ÐšÐ½Ð¾Ð¿ÐºÐ¸ Ñ‚ÐµÐ¿ÐµÑ€ÑŒ Ñ€Ð°Ð±Ð¾Ñ‚Ð°ÑŽÑ‚ Ð½Ð° Ð²ÑÐµÑ… Ð¼Ð¾Ð±Ð¸Ð»ÑŒÐ½Ñ‹Ñ… ÑƒÑÑ‚Ñ€Ð¾Ð¹ÑÑ‚Ð²Ð°Ñ…"
echo "âœ… Ð£Ð±Ñ€Ð°Ð½Ð° Ð·Ð°Ð´ÐµÑ€Ð¶ÐºÐ° 300Ð¼Ñ Ð¿Ñ€Ð¸ ÐºÐ»Ð¸ÐºÐµ (iOS/Android)"
echo "âœ… Ð˜ÑÐ¿Ñ€Ð°Ð²Ð»ÐµÐ½Ð° Ð¿Ñ€Ð¾Ð±Ð»ÐµÐ¼Ð° Ñ Ð´Ð²Ð¾Ð¹Ð½Ñ‹Ð¼Ð¸ ÐºÐ»Ð¸ÐºÐ°Ð¼Ð¸"
echo "âœ… Ð”Ð¾Ð±Ð°Ð²Ð»ÐµÐ½Ñ‹ ÑƒÐ²ÐµÐ»Ð¸Ñ‡ÐµÐ½Ð½Ñ‹Ðµ Ð¾Ð±Ð»Ð°ÑÑ‚Ð¸ Ð½Ð°Ð¶Ð°Ñ‚Ð¸Ñ"
echo "âœ… Hero Ð¸Ð·Ð¾Ð±Ñ€Ð°Ð¶ÐµÐ½Ð¸Ðµ ÐºÐ¾Ñ€Ñ€ÐµÐºÑ‚Ð½Ð¾ Ð¾Ñ‚Ð¾Ð±Ñ€Ð°Ð¶Ð°ÐµÑ‚ÑÑ"
echo "âœ… Ð“Ð°Ð¼Ð±ÑƒÑ€Ð³ÐµÑ€ Ð¼ÐµÐ½ÑŽ Ñ€Ð°Ð±Ð¾Ñ‚Ð°ÐµÑ‚ Ð¿Ñ€Ð°Ð²Ð¸Ð»ÑŒÐ½Ð¾"
echo ""

# ÐŸÑ€Ð¾Ð²ÐµÑ€ÐºÐ° Ñ„Ð°Ð¹Ð»Ð¾Ð²
echo -e "${YELLOW}ðŸ” ÐŸÑ€Ð¾Ð²ÐµÑ€ÐºÐ° ÐºÑ€Ð¸Ñ‚Ð¸Ñ‡ÐµÑÐºÐ¸Ñ… Ñ„Ð°Ð¹Ð»Ð¾Ð²...${NC}"
REQUIRED_FILES=(
    "index.html"
    "assets/css/main.css"
    "assets/css/mobile.css"
    "assets/css/critical-mobile-fix.css"
    "assets/js/main.js"
    "assets/js/calc.js"
    "robots.txt"
    "sitemap.xml"
)

ALL_OK=true
for file in "${REQUIRED_FILES[@]}"; do
    if [ -f "$file" ]; then
        echo -e "${GREEN}âœ“${NC} $file"
    else
        echo -e "${RED}âœ—${NC} $file - ÐžÐ¢Ð¡Ð£Ð¢Ð¡Ð¢Ð’Ð£Ð•Ð¢!"
        ALL_OK=false
    fi
done

if [ "$ALL_OK" = false ]; then
    echo -e "${RED}âŒ ÐÐµ Ð²ÑÐµ Ñ„Ð°Ð¹Ð»Ñ‹ Ð½Ð° Ð¼ÐµÑÑ‚Ðµ!${NC}"
    exit 1
fi

echo ""
echo -e "${GREEN}âœ… Ð’ÑÐµ Ñ„Ð°Ð¹Ð»Ñ‹ Ð³Ð¾Ñ‚Ð¾Ð²Ñ‹ Ðº Ð´ÐµÐ¿Ð»Ð¾ÑŽ!${NC}"
echo ""

# SFTP Ð½Ð°ÑÑ‚Ñ€Ð¾Ð¹ÐºÐ¸
SFTP_HOST="hosting.reg.ru"
SFTP_USER="u3207373"
SFTP_PASS="5x8cZ19H0rWhh6Qt"
REMOTE_DIR="/var/www/u3207373/data/www/avtogost77.ru"

echo -e "${YELLOW}ðŸ“¤ ÐÐ°Ñ‡Ð¸Ð½Ð°ÑŽ Ð·Ð°Ð³Ñ€ÑƒÐ·ÐºÑƒ Ð½Ð° Ñ…Ð¾ÑÑ‚Ð¸Ð½Ð³...${NC}"
echo "Ð¡ÐµÑ€Ð²ÐµÑ€: $SFTP_HOST"
echo "Ð”Ð¸Ñ€ÐµÐºÑ‚Ð¾Ñ€Ð¸Ñ: $REMOTE_DIR"
echo ""

# Ð¡Ð¾Ð·Ð´Ð°ÐµÐ¼ Ð²Ñ€ÐµÐ¼ÐµÐ½Ð½Ñ‹Ð¹ batch Ñ„Ð°Ð¹Ð» Ð´Ð»Ñ sftp
cat > sftp_batch.txt << EOF
cd $REMOTE_DIR
put -r assets
put index.html
put robots.txt
put sitemap.xml
put test-buttons.html
bye
EOF

# Ð’Ñ‹Ð¿Ð¾Ð»Ð½ÑÐµÐ¼ Ð·Ð°Ð³Ñ€ÑƒÐ·ÐºÑƒ
sshpass -p "$SFTP_PASS" sftp -oBatchMode=no -oStrictHostKeyChecking=no -b sftp_batch.txt $SFTP_USER@$SFTP_HOST

# Ð£Ð´Ð°Ð»ÑÐµÐ¼ Ð²Ñ€ÐµÐ¼ÐµÐ½Ð½Ñ‹Ð¹ Ñ„Ð°Ð¹Ð»
rm -f sftp_batch.txt

echo ""
echo -e "${GREEN}âœ… Ð”Ð•ÐŸÐ›ÐžÐ™ Ð—ÐÐ’Ð•Ð Ð¨Ð•Ð!${NC}"
echo ""
echo -e "${YELLOW}ðŸ“‹ Ð§Ð•ÐšÐ›Ð˜Ð¡Ð¢ Ð”Ð›Ð¯ ÐŸÐ ÐžÐ’Ð•Ð ÐšÐ˜:${NC}"
echo "1. ÐžÑ‚ÐºÑ€Ð¾Ð¹Ñ‚Ðµ https://avtogost77.ru Ð½Ð° Ð¼Ð¾Ð±Ð¸Ð»ÑŒÐ½Ð¾Ð¼"
echo "2. ÐŸÑ€Ð¾Ð²ÐµÑ€ÑŒÑ‚Ðµ ÐºÐ½Ð¾Ð¿ÐºÐ¸ - Ð¾Ð½Ð¸ Ð´Ð¾Ð»Ð¶Ð½Ñ‹ Ñ€ÐµÐ°Ð³Ð¸Ñ€Ð¾Ð²Ð°Ñ‚ÑŒ Ð½Ð° Ð¿ÐµÑ€Ð²Ñ‹Ð¹ ÐºÐ»Ð¸Ðº"
echo "3. ÐŸÑ€Ð¾Ð²ÐµÑ€ÑŒÑ‚Ðµ hero Ð¸Ð·Ð¾Ð±Ñ€Ð°Ð¶ÐµÐ½Ð¸Ðµ - Ð´Ð¾Ð»Ð¶Ð½Ð¾ Ð¾Ñ‚Ð¾Ð±Ñ€Ð°Ð¶Ð°Ñ‚ÑŒÑÑ"
echo "4. ÐŸÑ€Ð¾Ð²ÐµÑ€ÑŒÑ‚Ðµ Ð¼ÐµÐ½ÑŽ-Ð³Ð°Ð¼Ð±ÑƒÑ€Ð³ÐµÑ€ - Ð´Ð¾Ð»Ð¶Ð½Ð¾ Ð¾Ñ‚ÐºÑ€Ñ‹Ð²Ð°Ñ‚ÑŒÑÑ/Ð·Ð°ÐºÑ€Ñ‹Ð²Ð°Ñ‚ÑŒÑÑ"
echo "5. ÐžÑ‚Ð¿Ñ€Ð°Ð²ÑŒÑ‚Ðµ Ñ‚ÐµÑÑ‚Ð¾Ð²ÑƒÑŽ Ð·Ð°ÑÐ²ÐºÑƒ Ñ‡ÐµÑ€ÐµÐ· ÐºÐ°Ð»ÑŒÐºÑƒÐ»ÑÑ‚Ð¾Ñ€"
echo "6. ÐŸÑ€Ð¾Ð²ÐµÑ€ÑŒÑ‚Ðµ ÑÑ‚Ñ€Ð°Ð½Ð¸Ñ†Ñƒ Ñ‚ÐµÑÑ‚Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð¸Ñ: https://avtogost77.ru/test-buttons.html"
echo ""
echo -e "${GREEN}ðŸŽ‰ Ð¡Ð°Ð¹Ñ‚ Ð²Ð¾ÑÑÑ‚Ð°Ð½Ð¾Ð²Ð»ÐµÐ½! Ð¢ÐµÐ¿ÐµÑ€ÑŒ Ð¼Ð¾Ð¶Ð½Ð¾ ÑÐ¿Ð¾ÐºÐ¾Ð¹Ð½Ð¾ Ñ€Ð°Ð±Ð¾Ñ‚Ð°Ñ‚ÑŒ Ð½Ð°Ð´ ULTIMATE Ð²ÐµÑ€ÑÐ¸ÐµÐ¹!${NC}"