#!/bin/bash

# Список основных файлов для обработки (исключая блоги и юридические документы)
FILES=$(find . -type f \( \
    -name "gruzoperevozki-*.html" \
    -o -name "index.html" \
    -o -name "services.html" \
    -o -name "contact.html" \
    -o -name "about.html" \
    -o -name "dostavka-*.html" \
    -o -name "transportnaya-kompaniya.html" \
    -o -name "urgent-delivery.html" \
    -o -name "sbornye-gruzy.html" \
    \) ! -path "./backup*/*")

# Функция для замены текста с сохранением отступов
replace_text() {
    local file=$1
    
    # Страховки и компенсации
    sed -i 's/страхов[а-я]* груз[а-я]*/бережная доставка/g' "$file"
    sed -i 's/страхов[а-я]* покрыти[а-я]*/надежная перевозка/g' "$file"
    sed -i 's/страхов[а-я]* компани[а-я]*/мы/g' "$file"
    sed -i 's/страхов[а-я]* случа[а-я]*/проблемная ситуация/g' "$file"
    sed -i 's/все перевозки застрахованы/мы отвечаем за сохранность груза/g' "$file"
    sed -i 's/каждый груз застрахован/мы отвечаем за каждый груз/g' "$file"
    sed -i 's/компенсаци[а-я]*/оперативное решение/g' "$file"
    sed -i 's/страхование каждого груза/бережная доставка каждого груза/g' "$file"
    sed -i 's/страхование и гарантии/надежность и гарантии/g' "$file"
    sed -i 's/страхование - [0-9.]*% от стоимости груза//g' "$file"
    sed -i 's/страхование груза/бережная доставка/g' "$file"
    sed -i 's/страховка/бережная доставка/g' "$file"
    sed -i 's/страхование, //' "$file"
    sed -i 's/, страхование//' "$file"
    
    # Документооборот и документы
    sed -i 's/электронн[а-я]* документооборот[а-я]*/электронный обмен документами/g' "$file"
    sed -i 's/EDI документооборот/электронный обмен документами/g' "$file"
    sed -i 's/ЭДО/электронный обмен документами/g' "$file"
    sed -i 's/закрывающ[а-я]* документ[а-я]*/транспортная накладная/g' "$file"
    sed -i 's/полный пакет документов/помощь в оформлении ТрН/g' "$file"
    
    # Отслеживание и охрана
    sed -i 's/систем[а-я]* отслеживани[а-я]*/оперативная связь с водителем/g' "$file"
    sed -i 's/GPS-мониторинг[а-я]* для отслеживани[а-я]*/оперативная связь с водителем/g' "$file"
    sed -i 's/для отслеживания используйте/для информации о грузе используйте/g' "$file"
    sed -i 's/отслеживание груза/информация о грузе/g' "$file"
    sed -i 's/отслеживания через сайт/информации через сайт/g' "$file"
    sed -i 's/охран[а-я]* груз[а-я]*/бережная доставка/g' "$file"
    sed -i 's/пломб[а-я]*/надежная перевозка/g' "$file"
    sed -i 's/трек-номер для отслеживания/информацию о статусе доставки/g' "$file"
    sed -i 's/отслеживание 24\/7/информация о грузе 24\/7/g' "$file"
    sed -i 's/с отслеживанием/с информированием/g' "$file"
    sed -i 's/Грузчики, упаковка, отслеживание/Грузчики, упаковка, информирование/g' "$file"
    
    # НДС
    sed -i 's/с НДС/фиксированная цена/g' "$file"
    sed -i 's/без НДС/фиксированная цена/g' "$file"
    
    # Специфичные фразы
    sed -i 's/собственный автопарк/проверенные партнеры-перевозчики/g' "$file"
    sed -i 's/собственный транспорт/проверенные партнеры/g' "$file"
    sed -i 's/свой транспорт/надежные перевозчики/g' "$file"
    sed -i 's/в сохранности/бережно/g' "$file"
    sed -i 's/сохранность груза/бережная доставка/g' "$file"
    sed -i 's/материальную ответственность/ответственность/g' "$file"
    sed -i 's/полную материальную ответственность/полную ответственность/g' "$file"
    sed -i 's/объявленная ценность и\/или страхование/дополнительная защита/g' "$file"
    sed -i 's/Гарантия сохранности/Бережная доставка/g' "$file"
    
    # Мета-теги
    sed -i "s/Грузчики, упаковка, страхование/Грузчики, упаковка, бережная доставка/g" "$file"
    sed -i "s/страхование каждого груза/бережная доставка каждого груза/g" "$file"
}

# Обработка каждого файла
for file in $FILES; do
    echo "Обработка файла: $file"
    replace_text "$file"
done

echo "Готово! Проверьте изменения в git diff"
