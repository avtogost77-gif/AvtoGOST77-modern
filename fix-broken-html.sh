#!/bin/bash

# –°–∫—Ä–∏–ø—Ç –¥–ª—è –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø–æ–≤—Ä–µ–∂–¥–µ–Ω–Ω—ã—Ö HTML —Ñ–∞–π–ª–æ–≤ (–æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—â–∏–π —Ç–µ–≥ </body>)

echo "üîÑ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–≤—Ä–µ–∂–¥–µ–Ω–Ω—ã—Ö HTML —Ñ–∞–π–ª–æ–≤..."

for file in $(find . -maxdepth 1 -name "*.html"); do
    echo "–ü—Ä–æ–≤–µ—Ä–∫–∞ $file..."

    # –ü—Ä–æ–≤–µ—Ä—è–µ–º, –µ—Å—Ç—å –ª–∏ –∑–∞–∫—Ä—ã–≤–∞—é—â–∏–π —Ç–µ–≥ </body>
    if ! grep -q "</body>" "$file"; then
        echo "üîß –ò—Å–ø—Ä–∞–≤–ª—è–µ–º $file - –¥–æ–±–∞–≤–ª—è–µ–º </body>"

        # –î–æ–±–∞–≤–ª—è–µ–º </body> –ø–µ—Ä–µ–¥ </html>
        sed -i '/<\/html>/i\
</body>' "$file"

        echo "‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω $file"
    else
        echo "‚úÖ $file –≤ –ø–æ—Ä—è–¥–∫–µ"
    fi
done

echo "üéâ –í—Å–µ —Ñ–∞–π–ª—ã –ø—Ä–æ–≤–µ—Ä–µ–Ω—ã –∏ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω—ã!"

