#!/bin/bash

echo "üöÄ –°–†–û–ß–ù–´–ô –î–ï–ü–õ–û–ô –ú–û–ë–ò–õ–¨–ù–´–• –§–ò–ö–°–û–í!"
echo "=================================="
echo "üì± –ò—Å–ø—Ä–∞–≤–ª—è–µ–º —Å–∂–∞—Ç—É—é –∏ –Ω–µ—á–∏—Ç–∞–µ–º—É—é –º–æ–±–∏–ª–∫—É"

VPS_HOST="root@193.160.208.183"
VPS_PATH="/www/wwwroot/avtogost77.ru"
SSH_KEY="$HOME/.ssh/id_ed25519"

if [ ! -f "$SSH_KEY" ]; then
    echo "‚ùå –û—à–∏–±–∫–∞: SSH –∫–ª—é—á –Ω–µ –Ω–∞–π–¥–µ–Ω: $SSH_KEY"
    exit 1
fi
echo "‚úÖ SSH –∫–ª—é—á –Ω–∞–π–¥–µ–Ω: $SSH_KEY"

# –°–æ–∑–¥–∞–µ–º —Ä–µ–∑–µ—Ä–≤–Ω—É—é –∫–æ–ø–∏—é CSS
echo "üì¶ –°–æ–∑–¥–∞–Ω–∏–µ —Ä–µ–∑–µ—Ä–≤–Ω–æ–π –∫–æ–ø–∏–∏ CSS..."
ssh -i $SSH_KEY $VPS_HOST "cd $VPS_PATH && cp assets/css/unified-site-styles.css assets/css/unified-site-styles.css.backup-$(date +%Y%m%d-%H%M%S) 2>/dev/null || true"

# –ó–∞–≥—Ä—É–∂–∞–µ–º –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–π CSS —Å –º–æ–±–∏–ª—å–Ω—ã–º–∏ —Å—Ç–∏–ª—è–º–∏
echo "üì± –ó–∞–≥—Ä—É–∂–∞–µ–º –ò–°–ü–†–ê–í–õ–ï–ù–ù–´–ï –º–æ–±–∏–ª—å–Ω—ã–µ —Å—Ç–∏–ª–∏..."
scp -i $SSH_KEY assets/css/unified-site-styles.css $VPS_HOST:$VPS_PATH/assets/css/

# –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞
echo "üîí –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞..."
ssh -i $SSH_KEY $VPS_HOST "chmod 644 $VPS_PATH/assets/css/unified-site-styles.css"
ssh -i $SSH_KEY $VPS_HOST "chown www-data:www-data $VPS_PATH/assets/css/unified-site-styles.css"

# –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞–µ–º Nginx –¥–ª—è –æ—á–∏—Å—Ç–∫–∏ –∫–µ—à–∞
echo "üîÑ –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞–µ–º Nginx..."
ssh -i $SSH_KEY $VPS_HOST "systemctl reload nginx"

echo ""
echo "‚úÖ –ú–û–ë–ò–õ–¨–ù–´–ï –§–ò–ö–°–´ –£–°–ü–ï–®–ù–û –†–ê–ó–í–ï–†–ù–£–¢–´!"
echo "üéØ –ß—Ç–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ:"
echo "   ‚Ä¢ –£–≤–µ–ª–∏—á–µ–Ω—ã —Ä–∞–∑–º–µ—Ä—ã —à—Ä–∏—Ñ—Ç–æ–≤ –¥–ª—è —á–∏—Ç–∞–µ–º–æ—Å—Ç–∏"
echo "   ‚Ä¢ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω—ã —Ä–∞–∑–º–µ—Ä—ã –∫–Ω–æ–ø–æ–∫ –∏ —Ñ–æ—Ä–º"
echo "   ‚Ä¢ –î–æ–±–∞–≤–ª–µ–Ω—ã touch-friendly —Ç–∞—Ä–≥–µ—Ç—ã (44px+)"
echo "   ‚Ä¢ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω –∑—É–º –Ω–∞ iOS –ø—Ä–∏ —Ñ–æ–∫—É—Å–µ –Ω–∞ input"
echo "   ‚Ä¢ –£–ª—É—á—à–µ–Ω–∞ –∞–¥–∞–ø—Ç–∞—Ü–∏—è —Ö–∏—Ä–æ-—Å–µ–∫—Ü–∏–∏"
echo "   ‚Ä¢ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ –Ω–∞–≤–∏–≥–∞—Ü–∏—è –∏ –∫–∞–ª—å–∫—É–ª—è—Ç–æ—Ä"
echo "   ‚Ä¢ –î–æ–±–∞–≤–ª–µ–Ω—ã –æ—Ç—Å—Ç—É–ø—ã –∏ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ grid-—ã"
echo ""
echo "üì± –ü—Ä–æ–≤–µ—Ä—å —Å–∞–π—Ç –Ω–∞ –º–æ–±–∏–ª—å–Ω–æ–º - –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å –Ω–∞–º–Ω–æ–≥–æ –ª—É—á—à–µ!"
echo "üîó https://avtogost77.ru"


