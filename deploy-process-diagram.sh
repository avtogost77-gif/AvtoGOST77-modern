#!/bin/bash

echo "๐ ะะะฃะขะะฏ ะะะะะะะะะ ะะะะฆะะกะกะ!"
echo "============================="
echo "๐จ ะะฐะผะตะฝัะตะผ ัะบััะฝัะน ัะตะบัั ะฝะฐ ะฒะธะทัะฐะปัะฝัั ะดะธะฐะณัะฐะผะผั!"

VPS_HOST="root@193.160.208.183"
VPS_PATH="/www/wwwroot/avtogost77.ru"
SSH_KEY="$HOME/.ssh/id_ed25519"

if [ ! -f "$SSH_KEY" ]; then
    echo "โ ะัะธะฑะบะฐ: SSH ะบะปัั ะฝะต ะฝะฐะนะดะตะฝ: $SSH_KEY"
    exit 1
fi
echo "โ SSH ะบะปัั ะฝะฐะนะดะตะฝ: $SSH_KEY"

# ะกะพะทะดะฐะตะผ ัะตะทะตัะฒะฝัั ะบะพะฟะธั
echo "๐ฆ ะกะพะทะดะฐะฝะธะต ัะตะทะตัะฒะฝะพะน ะบะพะฟะธะธ..."
ssh -i $SSH_KEY $VPS_HOST "cd $VPS_PATH && cp index.html index.html.backup-diagram-$(date +%Y%m%d-%H%M%S) 2>/dev/null || true"
ssh -i $SSH_KEY $VPS_HOST "cd $VPS_PATH/assets/css && cp unified-site-styles.css unified-site-styles.css.backup-diagram-$(date +%Y%m%d-%H%M%S) 2>/dev/null || true"

# ะะฐะณััะถะฐะตะผ ะพะฑะฝะพะฒะปะตะฝะฝัะต ัะฐะนะปั
echo "๐ ะะฐะณััะถะฐะตะผ ะะะะะะะะะฃ ะฟัะพัะตััะฐ..."
scp -i $SSH_KEY index.html $VPS_HOST:$VPS_PATH/
scp -i $SSH_KEY assets/css/unified-site-styles.css $VPS_HOST:$VPS_PATH/assets/css/

# ะฃััะฐะฝะฐะฒะปะธะฒะฐะตะผ ะฟัะฐะฒะฐ ะดะพัััะฟะฐ
echo "๐ ะฃััะฐะฝะฐะฒะปะธะฒะฐะตะผ ะฟัะฐะฒะฐ ะดะพัััะฟะฐ..."
ssh -i $SSH_KEY $VPS_HOST "chmod 644 $VPS_PATH/index.html"
ssh -i $SSH_KEY $VPS_HOST "chown www-data:www-data $VPS_PATH/index.html"
ssh -i $SSH_KEY $VPS_HOST "chmod 644 $VPS_PATH/assets/css/unified-site-styles.css"
ssh -i $SSH_KEY $VPS_HOST "chown www-data:www-data $VPS_PATH/assets/css/unified-site-styles.css"

# ะะตัะตะทะฐะฟััะบะฐะตะผ Nginx ะดะปั ะพัะธััะบะธ ะบะตัะฐ
echo "๐ ะะตัะตะทะฐะฟััะบะฐะตะผ Nginx..."
ssh -i $SSH_KEY $VPS_HOST "systemctl reload nginx"

echo ""
echo "๐ ะะะะะะะะะ ะะะะฆะะกะกะ ะะะขะะะ!"
echo ""
echo "๐ ะงะขะ ะะะะะะะะะกะฌ:"
echo "   ๐๏ธ ะฃะะะะะะ: ะกะบััะฝัะน ัะตะบััะพะฒัะน ัะฟะธัะพะบ ัะฐะณะพะฒ"
echo "   โจ ะะะะะะะะ: ะััััั ะฒะธะทัะฐะปัะฝัั ะดะธะฐะณัะฐะผะผั"
echo ""
echo "๐ฏ ะกะขะะฃะะขะฃะะ ะะะะะะะะะซ:"
echo "   ๐งฎ ะญัะฐะฟ 1: ะะฐััะตั ะพะฝะปะฐะนะฝ (30 ัะตะบ)"
echo "      โข ๐ ะะฐััััั"
echo "      โข โ๏ธ ะะตั/ะณะฐะฑะฐัะธัั"
echo "      โข ๐ฐ ะฆะตะฝะฐ ะฑะตะท ัะบััััั ะฟะปะฐัะตะถะตะน"
echo ""
echo "   ๐ ะญัะฐะฟ 2: ะัะพัะผะปะตะฝะธะต (2 ะผะธะฝ)"
echo "      โข ๐ ะะฝะปะฐะนะฝ/ะทะฒะพะฝะพะบ"
echo "      โข โฐ ะัะตะผั ะฟะพะดะฐัะธ"
echo "      โข ๐ ะัะพะฑัะต ััะตะฑะพะฒะฐะฝะธั"
echo ""
echo "   ๐ ะญัะฐะฟ 3: ะะพะดะฐัะฐ ะฐะฒัะพ (ะพั 2 ัะฐัะพะฒ)"
echo "      โข โก ะขะพัะฝะพ ะฒ ััะพะบ"
echo "      โข ๐ฆ ะะพะผะพัั ั ะฟะพะณััะทะบะพะน"
echo "      โข ๐ ะะฐะดะตะถะฝะพะต ะบัะตะฟะปะตะฝะธะต"
echo ""
echo "   โ ะญัะฐะฟ 4: ะะพััะฐะฒะบะฐ (ัะพัะฝะพ ะฒ ััะพะบ)"
echo "      โข ๐ ะกะฒัะทั ั ะฟะพะปััะฐัะตะปะตะผ"
echo "      โข ๐ ะะฐะทะณััะทะบะฐ/ะดะพะบัะผะตะฝัั"
echo "      โข ๐ ะขัะฐะฝัะฟะพััะฝะฐั ะฝะฐะบะปะฐะดะฝะฐั"
echo ""
echo "๐จ ะะะะะะ ะคะะจะะ:"
echo "   โข ๐ฏ ะะฝัะตัะฐะบัะธะฒะฝัะต ะบะฐััะพัะบะธ ั hover-ัััะตะบัะฐะผะธ"
echo "   โข โก๏ธ ะกััะตะปะบะธ ะผะตะถะดั ััะฐะฟะฐะผะธ"
echo "   โข ๐ ะฆะฒะตัะฝัะต ะฐะบัะตะฝัั (ัะธะฝะธะน/ะทะตะปะตะฝัะน)"
echo "   โข โฑ๏ธ ะัะตะผั ะฒัะฟะพะปะฝะตะฝะธั ะบะฐะถะดะพะณะพ ััะฐะฟะฐ"
echo "   โข ๐ฑ ะะดะฐะฟัะธะฒะฝัะน ะดะธะทะฐะนะฝ ะดะปั ะผะพะฑะธะปะพะบ"
echo ""
echo "๐ฑ ะะะะะะฌะะะฏ ะะะะกะะฏ:"
echo "   โข ะะตััะธะบะฐะปัะฝะพะต ัะฐัะฟะพะปะพะถะตะฝะธะต"
echo "   โข ะะพะฒะตัะฝัััะต ัััะตะปะบะธ (90ยฐ)"
echo "   โข ะฃะฒะตะปะธัะตะฝะฝัะต touch-ัะฐัะณะตัั"
echo ""
echo "๐ ะัะพะฒะตัั ัะตะทัะปััะฐั: https://avtogost77.ru"
echo "๐ฏ ะขะตะฟะตัั ะฟัะพัะตัั ัะฐะฑะพัั ะะะะะฏะะะซะ ะ ะะะะฏะขะะซะ!"


