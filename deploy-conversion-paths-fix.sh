#!/bin/bash

echo "๐ฅ ะกะะะงะะซะ ะคะะะก: CONVERSION PATHS!"
echo "================================="
echo "๐ฏ ะัะฟัะฐะฒะปัะตะผ ะฑะตะปัะน ะฝะฐ ะฑะตะปะพะผ - ะดะพะฑะฐะฒะปัะตะผ ะบะพะฝััะฐััะฝะพััั!"

VPS_HOST="root@193.160.208.183"
VPS_PATH="/www/wwwroot/avtogost77.ru"
SSH_KEY="$HOME/.ssh/id_ed25519"

if [ ! -f "$SSH_KEY" ]; then
    echo "โ ะัะธะฑะบะฐ: SSH ะบะปัั ะฝะต ะฝะฐะนะดะตะฝ: $SSH_KEY"
    exit 1
fi
echo "โ SSH ะบะปัั ะฝะฐะนะดะตะฝ: $SSH_KEY"

# ะกะพะทะดะฐะตะผ ัะตะทะตัะฒะฝัั ะบะพะฟะธั
echo "๐ฆ ะกะพะทะดะฐะฝะธะต ัะตะทะตัะฒะฝะพะน ะบะพะฟะธะธ CSS..."
ssh -i $SSH_KEY $VPS_HOST "cd $VPS_PATH/assets/css && cp unified-site-styles.css unified-site-styles.css.backup-conv-$(date +%Y%m%d-%H%M%S) 2>/dev/null || true"

# ะะฐะณััะถะฐะตะผ ะธัะฟัะฐะฒะปะตะฝะฝัะต ััะธะปะธ
echo "๐จ ะะฐะณััะถะฐะตะผ ะะกะะะะะะะะะซะ ััะธะปะธ ะดะปั conversion-paths..."
scp -i $SSH_KEY assets/css/unified-site-styles.css $VPS_HOST:$VPS_PATH/assets/css/

# ะฃััะฐะฝะฐะฒะปะธะฒะฐะตะผ ะฟัะฐะฒะฐ ะดะพัััะฟะฐ
echo "๐ ะฃััะฐะฝะฐะฒะปะธะฒะฐะตะผ ะฟัะฐะฒะฐ ะดะพัััะฟะฐ..."
ssh -i $SSH_KEY $VPS_HOST "chmod 644 $VPS_PATH/assets/css/unified-site-styles.css"
ssh -i $SSH_KEY $VPS_HOST "chown www-data:www-data $VPS_PATH/assets/css/unified-site-styles.css"

# ะะตัะตะทะฐะฟััะบะฐะตะผ Nginx ะดะปั ะพัะธััะบะธ ะบะตัะฐ
echo "๐ ะะตัะตะทะฐะฟััะบะฐะตะผ Nginx..."
ssh -i $SSH_KEY $VPS_HOST "systemctl reload nginx"

echo ""
echo "โ CONVERSION PATHS ะะกะะะะะะะะซ!"
echo ""
echo "๐ฏ ะงะขะ ะะะะะะะะะ:"
echo "   ๐จ ะะตะปัะน ัะพะฝ ั ะณัะฐะดะธะตะฝัะพะผ ะฒะผะตััะพ ะฟัะพะทัะฐัะฝะพะณะพ"
echo "   ๐ฆ ะกะตััะต ัะฐะผะบะธ ะดะปั ะฒะธะดะธะผะพััะธ ะบะฐััะพัะตะบ"
echo "   ๐ ะฆะฒะตัะฝัะต ะฟะพะปะพัะบะธ ัะฒะตััั ะดะปั ะบะฐะถะดะพะณะพ ัะธะฟะฐ"
echo "   ๐ซ ะขะตะฝะธ ะธ hover-ัััะตะบัั ะดะปั ะธะฝัะตัะฐะบัะธะฒะฝะพััะธ"
echo "   ๐ฑ ะะดะฐะฟัะธะฒะฝะฐั ัะตัะบะฐ ะดะปั ะผะพะฑะธะปะพะบ"
echo ""
echo "๐ฅ ะกะขะะะ ะะะะขะะงะะ:"
echo "   โก ะกัะพัะฝะพ: ะพัะฐะฝะถะตะฒะพ-ะบัะฐัะฝะฐั ะฟะพะปะพัะบะฐ"
echo "   ๐ฐ ะญะบะพะฝะพะผะธั: ะทะตะปัะฝะฐั ะฟะพะปะพัะบะฐ"
echo "   ๐ค ะะพะฝััะปััะฐัะธั: ัะธะฝัั ะฟะพะปะพัะบะฐ"
echo "   ๐ ะกัะฐะฒะฝะตะฝะธะต: ัะธะพะปะตัะพะฒะฐั ะฟะพะปะพัะบะฐ"
echo ""
echo "๐ฑ ะะะะะะฌะะะฏ ะะะะะขะะฆะะฏ:"
echo "   โข ะะพะปะพะฝะบะฐ ะฒ 1 ััะด"
echo "   โข ะฃะฒะตะปะธัะตะฝะฝัะต touch-ัะฐัะณะตัั"
echo "   โข ะะฟัะธะผะธะทะธัะพะฒะฐะฝะฝัะต ัะฐะทะผะตัั"
echo ""
echo "๐ ะัะพะฒะตัั ัะตะทัะปััะฐั: https://avtogost77.ru"
echo "๐ ะขะตะฟะตัั conversion-paths ะะะะะซ ะ ะะะะกะะะซ!"


